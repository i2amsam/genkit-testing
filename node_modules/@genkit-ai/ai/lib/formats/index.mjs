import {
  __async,
  __objRest,
  __spreadValues
} from "../chunk-7LUMLJGI.mjs";
import { arrayFormatter } from "./array";
import { enumFormatter } from "./enum";
import { jsonFormatter } from "./json";
import { jsonlFormatter } from "./jsonl";
import { textFormatter } from "./text";
function defineFormat(registry, options, handler) {
  const _a = options, { name } = _a, config = __objRest(_a, ["name"]);
  const formatter = { config, handler };
  registry.registerValue("format", name, formatter);
  return formatter;
}
function resolveFormat(registry, arg) {
  return __async(this, null, function* () {
    if (typeof arg === "string") {
      return registry.lookupValue("format", arg);
    }
    return arg;
  });
}
const DEFAULT_FORMATS = [
  jsonFormatter,
  arrayFormatter,
  textFormatter,
  enumFormatter,
  jsonlFormatter
];
function initializeFormats(registry) {
  for (const format of DEFAULT_FORMATS) {
    defineFormat(
      registry,
      __spreadValues({ name: format.name }, format.config),
      format.handler
    );
  }
}
export {
  DEFAULT_FORMATS,
  defineFormat,
  initializeFormats,
  resolveFormat
};
//# sourceMappingURL=index.mjs.map