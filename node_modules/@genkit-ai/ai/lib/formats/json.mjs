import "../chunk-7LUMLJGI.mjs";
import { extractJson } from "../extract";
const jsonFormatter = {
  name: "json",
  config: {
    contentType: "application/json",
    constrained: true
  },
  handler: (request) => {
    var _a;
    let instructions;
    if ((_a = request.output) == null ? void 0 : _a.schema) {
      instructions = `Output should be in JSON format and conform to the following schema:

\`\`\`
${JSON.stringify(request.output.schema)}
\`\`\`
`;
    }
    return {
      parseChunk: (chunk) => {
        return extractJson(chunk.accumulatedText);
      },
      parseResponse: (response) => {
        return extractJson(response.text);
      },
      instructions
    };
  }
};
export {
  jsonFormatter
};
//# sourceMappingURL=json.mjs.map